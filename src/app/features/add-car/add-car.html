<section class="px-[200px] py-6">
  <div class="max-w-[1200px] mx-auto">
    <h1 class="text-2xl font-semibold mb-4">Elan yerləşdir</h1>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <!-- FORM -->
      <div class="lg:col-span-2">
        <div class="bg-white rounded-xl shadow p-4">
          <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
            
            <!-- Marka -->
            <div class="flex flex-col">
              <label class="text-sm text-gray-700 mb-1">Marka</label>
              <select [(ngModel)]="form.marka" (change)="onBrandChange()" name="marka"
                      class="p-2 border border-gray-300 rounded bg-white cursor-pointer" required>
                <option value="" disabled selected>Seçin</option>
                <option *ngFor="let b of brandOptions" [value]="b">{{ b }}</option>
              </select>
            </div>

            <!-- Model -->
            <div class="flex flex-col">
              <label class="text-sm text-gray-700 mb-1">Model</label>
              <select [(ngModel)]="form.model" name="model"
                      [disabled]="!form.marka"
                      class="p-2 border border-gray-300 rounded bg-white" required>
                <option value="" disabled selected>Seçin</option>
                <option *ngFor="let m of modelOptions" [value]="m">{{ m }}</option>
              </select>
            </div>

            <!-- Şəhər -->
            <div class="flex flex-col">
              <label class="text-sm text-gray-700 mb-1">Şəhər</label>
              <select [(ngModel)]="form.city" name="city"
                      class="p-2 border border-gray-300 rounded bg-white cursor-pointer" required>
                <option value="" disabled selected>Seçin</option>
                <option *ngFor="let c of cityOptions" [value]="c">{{ c }}</option>
              </select>
            </div>

            <!-- Ban -->
            <div class="flex flex-col">
              <label class="text-sm text-gray-700 mb-1">Ban tipi</label>
              <select [(ngModel)]="form.ban" name="ban"
                      class="p-2 border border-gray-300 rounded bg-white cursor-pointer" required>
                <option value="" disabled selected>Seçin</option>
                <option *ngFor="let b of banOptions" [value]="b">{{ b }}</option>
              </select>
            </div>

            <!-- İl -->
            <div class="flex flex-col">
              <label class="text-sm text-gray-700 mb-1">Buraxılış ili</label>
              <select [(ngModel)]="form.year" name="year"
                      class="p-2 border border-gray-300 rounded bg-white cursor-pointer" required>
                <option value="" disabled selected>Seçin</option>
                <option *ngFor="let y of yearOptions" [value]="y">{{ y }}</option>
              </select>
            </div>

            <!-- Qiymət -->
            <div class="flex flex-col">
              <label class="text-sm text-gray-700 mb-1">Qiymət (USD)</label>
              <input type="number" min="0" [(ngModel)]="form.price" name="price"
                     class="p-2 border border-gray-300 rounded"
                     placeholder="Məs: 15000" required />
            </div>

            <!-- Şəkil linki -->
            <div class="flex flex-col md:col-span-3">
              <label class="text-sm text-gray-700 mb-1">Şəkil linki</label>
              <input type="text" [(ngModel)]="form.image" name="image"
                     class="p-2 border border-gray-300 rounded"
                     placeholder="Məs: https://example.com/car.jpg" required />
            </div>
          </div>

          <!-- Error & Success -->
          <div class="mt-3">
            <div *ngIf="error" class="text-red-600">{{ error }}</div>
            <div *ngIf="success" class="text-green-600">{{ success }}</div>
          </div>

          <!-- Buttons -->
          <div class="mt-4 flex gap-3">
            <button (click)="submit()" [disabled]="!isValid"
                    class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition disabled:opacity-50">
              Yerləşdir
            </button>
            <button (click)="reset()"
                    class="bg-white border border-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-100 transition">
              Sıfırla
            </button>
          </div>
        </div>
      </div>

      <!-- PREVIEW -->
      <div>
        <div class="bg-white rounded-xl shadow overflow-hidden">
          <div class="relative w-full overflow-hidden">
            <div class="pt-[56%]"></div>
            <img *ngIf="form.image; else noImg"
                 [src]="form.image" alt="preview"
                 class="absolute inset-0 w-full h-full object-cover" />
            <ng-template #noImg>
              <div class="absolute inset-0 flex items-center justify-center text-gray-400">
                Şəkil önizləməsi
              </div>
            </ng-template>
          </div>
          <div class="bg-white p-4">
            <h2 class="font-semibold text-gray-800 text-sm md:text-base line-clamp-2">
              {{ form.marka || '—' }} {{ form.model || '' }}
            </h2>
            <p class="text-gray-600 text-sm">
              {{ form.city || '—' }} • {{ form.year || '—' }} • {{ form.ban || '—' }}
            </p>
            <p class="text-lg font-bold text-blue-600 mt-1">
              {{ form.price ? (form.price | currency:'USD') : '—' }}
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
